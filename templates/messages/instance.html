{{ define "content" }}
<div class="row">
  <div class="col-md-6">
    <table class="table table-striped">
      <thead>
      </thead>
      <tbody>
        <tr>
          <th>Sid</th>
          {{- if .Message.CanViewProperty "Sid" }}
          <td><code>{{ .Message.Sid }}</code></td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Date Created</th>
          {{- if .Message.CanViewProperty "DateCreated" }}
          <td>{{ friendly_date (.Message.DateCreated.Time.In $.Loc) }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        {{/* need to nest these because all args are evaluated together */}}
        {{- if .Message.CanViewProperty "MessagingServiceSid" -}}
        {{- if .Message.MessagingServiceSid.Valid }}
        <tr>
          <th>Messaging Service Sid</th>
          <td>{{ .Message.MessagingServiceSid.String }}</td>
        </tr>
        {{- end }}
        {{- end }}
        <tr>
          <th>From</th>
          {{- if .Message.CanViewProperty "From" }}
          <td>{{ .Message.From.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>To</th>
          {{- if .Message.CanViewProperty "To" }}
          <td>{{ .Message.To.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Status</th>
          {{- if .Message.CanViewProperty "Status" }}
          <td>{{ .Message.Status.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-6">
    <table class="table table-striped">
      <thead>
      </thead>
      <tbody>
        <tr>
          <th>Direction</th>
          {{- if .Message.CanViewProperty "Direction" }}
          <td>{{ .Message.Direction.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Segments</th>
          {{- if .Message.CanViewProperty "NumSegments" }}
          <td>{{ .Message.NumSegments }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Price</th>
          {{- if and (.Message.CanViewProperty "Price") (.Message.CanViewProperty "PriceUnit") }}
          <td>{{ .Message.FriendlyPrice }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Number of Media</th>
          {{- if .Message.CanViewProperty "NumMedia" }}
          <td>{{ .Message.NumMedia }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
      </tbody>
    </table>
  </div>
</div>
{{- if (.Message.CanViewProperty "Body") }}
{{- if (gt (len .Message.Body) 0) }}
<div class="row">
  <div class="col-md-12">
    <table class="table">
      <tbody>
        <tr>
          <th>Body</th>
          <td><code>{{ .Message.Body }}</code></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
{{- end }}
{{- end }}
{{- if .Message.CanViewMedia }}
{{- if .Media }}
  {{- if .Media.Err }}
  <div class="row">
    <div class="col-md-12">
      <p>
      Error retrieving media for this message: {{ .Media.Err }}.
      Refresh the page to try again.
      </p>
    </div>
  </div>
  {{- else }}
    {{- range .Media.URLs }}
    <div class="row">
      <div class="col-md-12">
        <table class="table">
          <tbody>
            <tr>
              <th>Media</th>
              {{/* TODO - we should do better here about controlling the size of the image on the page. */}}
              <td>
                <a href="{{ . }}" title="Click to view the full size image">
                  <img class="mms-image" src="{{ . }}" alt="Image associated with the message" />
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    {{- end }}
  {{- end }}
{{- end }}
{{- end }}
<div class="row">
  <div class="col-md-12">
    API request time: {{ duration .Duration }}
  </div>
</div>
{{ end }}
