{{ define "content" }}
<div class="row">
  <div class="col-md-6">
    <table class="table table-striped">
      <thead>
      </thead>
      <tbody>
        <tr>
          <th>Sid</th>
          {{- if .Call.CanViewProperty "Sid" }}
          <td><code>{{ .Call.Sid }}</code></td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Date Created</th>
          {{- if .Call.CanViewProperty "DateCreated" }}
          <td>{{ friendly_date (.Call.DateCreated.Time.In $.Loc) }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Start Time</th>
          {{- if .Call.CanViewProperty "StartTime" }}
          <td>{{ friendly_date (.Call.StartTime.Time.In $.Loc) }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Duration</th>
          {{- if .Call.CanViewProperty "Duration" }}
          <td>{{ .Call.Duration.String }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Price</th>
          {{- if and (.Call.CanViewProperty "Price") (.Call.CanViewProperty "PriceUnit") }}
          <td>{{ .Call.FriendlyPrice }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-6">
    <table class="table table-striped">
      <tbody>
        <tr>
          <th>From</th>
          {{- if .Call.CanViewProperty "From" }}
          <td>{{ .Call.From.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>To</th>
          {{- if .Call.CanViewProperty "To" }}
          <td>{{ .Call.To.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Direction</th>
          {{- if .Call.CanViewProperty "Direction" }}
          <td>{{ .Call.Direction.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
        <tr>
          <th>Status</th>
          {{- if .Call.CanViewProperty "Status" }}
          <td>{{ .Call.Status.Friendly }}</td>
          {{- else }}
          <td>[redacted]</td>
          {{- end }}
        </tr>
      </tbody>
    </table>
  </div>
</div>
<h3>Recordings</h3>
{{- if .Call.CanViewNumRecordings }}
  {{- if .Recordings.Err }}
  <div class="row">
    <div class="col-md-12">
      <p>
      Error retrieving recordings for this call: {{ .Recordings.Err }}.
      Refresh the page to try again.
      </p>
    </div>
  </div>
  {{- else }}
    {{- if .Recordings.CanPlayRecording }}
      {{- range .Recordings.Recordings }}
        <div class="row">
          <div class="col-md-12">
            {{- if .CanPlay }}
            <h5>Recording {{ .Sid }} ({{ .Duration.String }})</h5>
            <p>
              <audio controls="true" preload="metadata">
                Your browser does not support the <code>audio</code> element.
                <source src="{{ .URL ".wav" }}" type="audio/x-wav">
                <source src="{{ .URL ".mp3" }}" type="audio/mpeg">
              </audio>
            </p>
            {{- else }}
            <h5>Recording</h5>
            <p>Cannot play this recording.</p>
            {{- end }}
          </div>
        </div>
      {{- end }}
    {{- else }}
    <div class="row">
      <div class="col-md-12">
        <p>
        {{- $len := len .Recordings.Recordings }}
        {{- if eq $len 0 }}
        There were no recordings
        {{- else if eq $len 1 }}
        There was one recording
        {{- else }}
        There were {{ $len }} recordings
        {{- end }}
        attached to this call.
        </p>
      </div>
    </div>
    {{- end }}
  {{- end }}
{{- else }}
<p>You do not have permission to see whether any recordings were made.</p>
{{- end }}
{{- end }}{{/* end content */}}
